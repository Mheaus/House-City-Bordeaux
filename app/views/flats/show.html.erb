<nav class="navbar navbar-expand-lg navbar-light fixed-top show" id="mainNav">
  <div class="container-fluid">
    <%= link_to "Back", flats_path, class: "navbar-brand back" %>
    <p id="disponibility">Actuellement disponible</p>
  </div>
</nav>

<header class="appartment-details-header">
  <div class="container-fluid p-0">
    <div id="carousel" class="carousel slide" data-ride="carousel">
      <div class="carousel-inner" role="listbox">
        <% 9.times do |t| %>
          <div class="carousel-item">
            <%= image_tag "outdoor#{t+1}", class: "image-blur" %>
            <div class="image-box">
              <%= image_tag "outdoor#{t+1}", class: "image" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</header>

<section id="description-header">
  <div id="title-price-box">
    <p class="title name"><%= @flat.name %></p>
    <p class="title surface">115m²</p>
    <div id="price-box">
      <p class="price">110 €</p>
      <p class="unity">/ par nuit</p>
    </div>
  </div>
  <div id="description-content-insights">
    <p class="description-content container-fluid"><%= @flat.description %></p>
    <div class="insights">
      <div class="row ">
        <% @flat.insights.each do |insight| %>
          <div class="insight">
            <p><%= show_svg(insight.icon_name) %> <%= insight.quantity %> <%= insight.legend %></p>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</section>

<section id="rooms-description">
  <button type="button" class="btn-rooms">
    Descriptif complet des pièces
    <span class="fa fa-caret-down" title="Expand rooms-description-content">
  </button>

</section>


<script>
  $(document).ready(function(e){
    $('#bed').addClass('svg');
  });
  jQuery('img.svg').each(function(){
    var $img = jQuery(this);
    var imgID = $img.attr('id');
    var imgClass = $img.attr('class');
    var imgURL = $img.attr('src');

    jQuery.get(imgURL, function(data) {
        // Get the SVG tag, ignore the rest
        var $svg = jQuery(data).find('svg');

        // Add replaced image's ID to the new SVG
        if(typeof imgID !== 'undefined') {
            $svg = $svg.attr('id', imgID);
        }
        // Add replaced image's classes to the new SVG
        if(typeof imgClass !== 'undefined') {
            $svg = $svg.attr('class', imgClass+' replaced-svg');
        }

        // Remove any invalid XML tags as per http://validator.w3.org
        $svg = $svg.removeAttr('xmlns:a');

        // Check if the viewport is set, if the viewport is not set the SVG wont't scale.
        if(!$svg.attr('viewBox') && $svg.attr('height') && $svg.attr('width')) {
            $svg.attr('viewBox', '0 0 ' + $svg.attr('height') + ' ' + $svg.attr('width'))
        }

        // Replace image with new SVG
        $img.replaceWith($svg);

    }, 'xml');

});
</script>


<%= content_for :after_js do %>
<script>
$(document).ready(function(e) {
  $('.carousel-inner>.carousel-item:first-child').addClass("active")
  $('.carousel').carousel({
    interval: 3500,
    pause: "none"
  })
});
</script>
<% end %>
